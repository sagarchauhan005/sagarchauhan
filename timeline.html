<!DOCTYPE html>
<html lang="en">
    <title>Dev Timeline Calculator</title>
<head>
        <!-- mobile specific metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Calculate timeline of any task correctly with correct estimations">
    <meta name="author" content="Sagar Chauhan | Dev Timeline Calculator">

    <meta name="image" property="image" content="https://raw.githubusercontent.com/sagarchauhan005/sagarchauhan005.github.io/master/images/background.png">

    <meta property="og:url" content="https://sagarchauhan005.github.io/">
    <meta property="og:title" content="Sagar Chauhan | Dev Timeline Calculator ">
    <meta property="og:description" content="Calculate timeline of any task correctly with correct estimations">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://raw.githubusercontent.com/sagarchauhan005/sagarchauhan005.github.io/master/images/background.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Sagar Chauhan | Dev Timeline Calculator">
    <meta name="twitter:description" content="Calculate timeline of any task correctly with correct estimations">
    <meta name="twitter:image:src" content="https://raw.githubusercontent.com/sagarchauhan005/sagarchauhan005.github.io/master/images/background.png">
    <meta name="twitter:domain" content="https://sagarchauhan005.github.io/">


    <link href="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta10/dist/css/tabler.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tabler/core@1.0.0-beta10/dist/js/tabler.min.js"></script>
    
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "m11u1duu9h");
    </script>

<!--    &lt;!&ndash; Google tag (gtag.js) &ndash;&gt;-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YVE9X71CTN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-YVE9X71CTN');
    </script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        .container {
            margin: 20px auto;
            max-width: 1200px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .footer {
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background-color: #f8f9fa !important;
            border-top: none !important;
        }
        .card {
            padding: 20px;
            margin-bottom: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        .task-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }
        .task-row input {
            flex-grow: 1;
        }
        .task-row input[type="number"] {
            width: 80px;
        }
        .task-row button {
            flex-shrink: 0;
        }
        #col1 {
            overflow-y: auto;
            max-height: calc(100vh - 40px);
        }
        #col2 {
            position: sticky;
            top: 0;
        }
        #result {
            display: none;
        }
        .about-me {
            order: 2;
        }
        .nav-tabs .nav-link {
            display: inline-block;
        }
        @media (max-width: 768px) {
            .row {
                flex-direction: column;
            }
            #col1, #col2 {
                position: static;
                max-height: none;
            }
            .about-me {
                order: 3;
            }
        }
        .placeholder-text {
            text-align: center;
            color: #6c757d;
            font-size: 16px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header" style="background-color: black;">
        <img src="https://sagarchauhan005.github.io/images/logo-sagar.png" alt="Logo" style="height:40px; width:40px;">
        <a href="https://sagarchauhan005.github.io/" target="_blank" class="btn btn-link" style="text-decoration: none;">
            <button class="btn btn-success">View my portfolio</button></a>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-6" id="col1">
                <div class="card">
                    <h2>Timeline Estimator</h2>

                    <div class="mb-3">
                        <label for="projectName" class="form-label">Project Name</label>
                        <input type="text" id="projectName" class="form-control" placeholder="Enter project name" required>
                    </div>

                    <div id="taskContainer">
                        <div class="task-row">
                            <input type="text" id="taskTitle1" class="form-control" placeholder="Task title">
                            <input type="number" id="taskTime1" class="form-control" placeholder="Days">
                            <button class="btn btn-primary" onclick="toggleTask(this)">+</button>
                        </div>
                    </div>

                    <button class="btn btn-success w-100 mt-3" onclick="calculateTimeline()">Calculate Timeline</button>
                    <p class="text-center mt-3">
                        <a href="#" data-bs-toggle="modal" data-bs-target="#calculationModal">Click to see how calculation works</a>
                    </p>

                    <div id="result">
                        <h3 id="result-title" class="text-center mt-4"></h3>
                        <div id="result-content"></div>
                    </div>
                </div>
                <div class="card about-me">
                    <h3>About Me</h3>
                    <p>Hi, I'm Sagar Chauhan, a passionate tech enthusiast and developer.</p>
                    <p>Visit my portfolio to learn more about my work and projects.</p>
                    <a href="https://sagarchauhan005.github.io/" target="_blank" class="btn btn-primary">Visit My Portfolio</a>
                </div>
            </div>

            <div class="col-md-6" id="col2">
                <div class="card">
                    <h2>How to Use</h2>
                    <p>1. Start by entering the project name.</p>
                    <p>2. Add tasks one by one with a title and estimated time in days.</p>
                    <p>3. Use the "+" button to add new tasks directly in the row or remove them using "√ó".</p>
                    <p>4. Click "Calculate Timeline" to get the total estimated time and breakdown by task.</p>
                    <p>5. View your last 5 estimations by clicking on the tabs below.</p>
                </div>

                <div class="card">
                    <h3>Last 5 Estimations:</h3>
                    <div class="nav nav-tabs" id="historyTabs" role="tablist"></div>
                    <div class="tab-content" id="historyContent"></div>
                    <p id="placeholderText" class="placeholder-text">You have no estimations, please try adding one</p>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>Made with ‚ù§Ô∏è by <a href="https://sagarchauhan005.github.io/" target="_blank">Sagar Chauhan</a></p>
        <p>Inspired by <a href="https://x.com/arpit_bhayani/status/1866696212310901090" target="_blank" >Arpit Bhayani üöÄ</a></p>
    </div>

    <!-- Error Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorModalLabel">Error</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="errorModalContent"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="proceedIgnoringEmpty()">Ignore and Proceed</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Calculation Modal -->
    <div class="modal fade" id="calculationModal" tabindex="-1" aria-labelledby="calculationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="calculationModalLabel">How Calculation Works</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>The formula for calculation is:</p>
                    <ul>
                        <li>Initial Estimate √ó 1.5 (for testing buffer)</li>
                        <li>Result √ó 2 (to account for unexpected delays)</li>
                    </ul>
                    <p>This ensures adequate time is allocated for development, testing, deployment, and unforeseen challenges like holidays or dependency issues.</p>
                    <p>Inspired by <a href="https://x.com/arpit_bhayani/status/1866696212310901090" target="_blank" >Arpit Bhayani üöÄ</a></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let taskCount = 1;

        function toggleTask(button) {
            if (button.textContent === '+') {
                addTask();
                button.textContent = '√ó';
                button.classList.replace('btn-primary', 'btn-danger');
                button.setAttribute('onclick', 'removeTask(this)');
            }
        }

        function addTask() {
            taskCount++;
            const taskContainer = document.getElementById('taskContainer');
            const newTask = document.createElement('div');
            newTask.classList.add('task-row');
            newTask.innerHTML = `
                <input type="text" id="taskTitle${taskCount}" class="form-control" placeholder="Task title">
                <input type="number" id="taskTime${taskCount}" class="form-control" placeholder="Days">
                <button class="btn btn-primary" onclick="toggleTask(this)">+</button>
            `;
            taskContainer.appendChild(newTask);

            // Automatically focus on the new task title input
            document.getElementById(`taskTitle${taskCount}`).focus();
        }

        function removeTask(button) {
            button.parentElement.remove();
        }

        function calculateTimeline() {
            const projectName = document.getElementById('projectName').value;
            if (!projectName) {
                alert('Please enter a project name.');
                return;
            }

            const tasks = document.querySelectorAll('.task-row');
            const results = [];
            let totalEstimate = 0;
            let errors = [];

            tasks.forEach((task, index) => {
                const titleInput = task.querySelector(`input[id^='taskTitle']`);
                const timeInput = task.querySelector(`input[id^='taskTime']`);

                if (!titleInput.value || !timeInput.value || parseFloat(timeInput.value) <= 0) {
                    errors.push(`Task ${index + 1}`);
                    return;
                }

                const title = titleInput.value;
                const time = parseFloat(timeInput.value);
                const withTesting = time * 1.5;
                const finalEstimate = Math.ceil(withTesting * 2);
                results.push({ title, estimate: finalEstimate });
                totalEstimate += finalEstimate;
            });

            if (errors.length > 0) {
                document.getElementById('errorModalContent').innerHTML = `
                    <p>The following tasks are incomplete or invalid:</p>
                    <ul>
                        ${errors.map(error => `<li>${error}</li>`).join('')}
                    </ul>
                    <p>Do you want to ignore these and proceed?</p>
                `;
                new bootstrap.Modal(document.getElementById('errorModal')).show();
                return;
            }

            displayResults(projectName, results, totalEstimate);
            resetForm();
        }

        function proceedIgnoringEmpty() {
            const tasks = document.querySelectorAll('.task-row');
            const projectName = document.getElementById('projectName').value;
            const results = [];
            let totalEstimate = 0;

            tasks.forEach(task => {
                const titleInput = task.querySelector(`input[id^='taskTitle']`);
                const timeInput = task.querySelector(`input[id^='taskTime']`);
                if (titleInput.value && timeInput.value && parseFloat(timeInput.value) > 0) {
                    const title = titleInput.value;
                    const time = parseFloat(timeInput.value);
                    const withTesting = time * 1.5;
                    const finalEstimate = Math.ceil(withTesting * 2);
                    results.push({ title, estimate: finalEstimate });
                    totalEstimate += finalEstimate;
                }
            });

            displayResults(projectName, results, totalEstimate);
            resetForm();
            bootstrap.Modal.getInstance(document.getElementById('errorModal')).hide();
        }

        function displayResults(projectName, results, totalEstimate) {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            document.getElementById('result-title').innerText = `${projectName} - Task Breakdown:`;
            document.getElementById('result-content').innerHTML = `
                <ul class="list-group mb-3">
                    ${results.map(r => `<li class="list-group-item">${r.title}: ${r.estimate} days</li>`).join('')}
                </ul>
                <h4>Total Estimated Time: ${totalEstimate} days</h4>
            `;

            const history = JSON.parse(localStorage.getItem('timelineHistory')) || [];
            history.unshift({ projectName, tasks: results, total: totalEstimate });
            if (history.length > 5) history.pop();
            localStorage.setItem('timelineHistory', JSON.stringify(history));

            displayHistory();
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }

        function resetForm() {
            document.getElementById('projectName').value = '';
            document.getElementById('taskContainer').innerHTML = `
                <div class="task-row">
                    <input type="text" id="taskTitle1" class="form-control" placeholder="Task title">
                    <input type="number" id="taskTime1" class="form-control" placeholder="Days">
                    <button class="btn btn-primary" onclick="toggleTask(this)">+</button>
                </div>
            `;
            taskCount = 1;
        }

        function displayHistory() {
            const history = JSON.parse(localStorage.getItem('timelineHistory')) || [];
            const historyTabs = document.getElementById('historyTabs');
            const historyContent = document.getElementById('historyContent');
            const placeholderText = document.getElementById('placeholderText');

            historyTabs.innerHTML = '';
            historyContent.innerHTML = '';

            if (history.length === 0) {
                placeholderText.style.display = 'block';
                return;
            }

            placeholderText.style.display = 'none';

            history.forEach((entry, index) => {
                const isActive = index === 0 ? 'active' : '';

                const tab = document.createElement('button');
                tab.className = `nav-link ${isActive}`;
                tab.id = `tab-${index}`;
                tab.setAttribute('data-bs-toggle', 'tab');
                tab.setAttribute('data-bs-target', `#content-${index}`);
                tab.type = 'button';
                tab.role = 'tab';
                tab.innerText = entry.projectName || `Project ${index + 1}`;
                historyTabs.appendChild(tab);

                const content = document.createElement('div');
                content.className = `tab-pane fade ${isActive ? 'show active' : ''}`;
                content.id = `content-${index}`;
                content.innerHTML = `
                    <ul class="list-group mb-2">
                        ${entry.tasks.map(t => `<li class="list-group-item">${t.title}: ${t.estimate} days</li>`).join('')}
                    </ul>
                    <strong>Total: ${entry.total} days</strong>
                `;
                historyContent.appendChild(content);
            });
        }

        displayHistory();
    </script>
</body>
</html>
